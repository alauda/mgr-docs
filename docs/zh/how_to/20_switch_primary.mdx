---
weight: 20
---

---
weight: 20
---

# 主节点切换

## 使用场景
当需要维护或主节点出现故障时，可手动切换主节点。切换过程保证数据一致性，业务仅会有秒级中断。

## 操作步骤
<Tabs>
<Tab label="命令行操作">
1. 查看当前主节点
```bash
kubectl exec -it $pod-name -c mysql -- mysql -uroot -p$password -e \
"SELECT MEMBER_HOST,MEMBER_ROLE FROM performance_schema.replication_group_members"
```

2. 触发主节点切换 
```bash
kubectl patch mysqlcluster $name -n $namespace --type merge -p '
spec:
  topology:
    groupReplication:
      primarySwitchover: true'
```

3. 验证新主节点
```bash
kubectl get mysqlcluster $name -n $namespace -o jsonpath='{.status.primary}'
```
</Tab>

<Tab label="界面操作">
1. 进入实例详情页
2. 打开「节点管理」页面
3. 选择要提升的从节点
4. 点击「切换为主节点」
5. 确认操作并等待完成
6. 验证：
   - 检查新主节点状态
   - 观察监控指标是否正常
   - 测试读写操作
</Tab>
</Tabs>

## 注意事项
1. 确保集群健康状态
2. 避免在业务高峰期操作
3. 切换后及时更新应用连接配置
