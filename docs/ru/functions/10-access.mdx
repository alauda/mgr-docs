---
weight: 10
sourceSHA: b4a5d2eacdf75ace8e7db5796990d03b9fc4148c0ac6960dc073e888f89de19e
---

# Способы доступа

## Обзор функции

Alauda Database for MySQL-MGR предоставляет несколько способов доступа к кластерам MySQL-MGR, поддерживая как внутренний, так и внешний доступ к кластеру. В этом разделе описывается, как получить соответствующие адреса подключения и установить соединение с экземплярами MySQL-MGR с помощью инструмента клиента `mysql`, как внутри, так и снаружи кластера. Для получения подробных примеров подключения клиентских библиотек, пожалуйста, обратитесь к разделу [Как получить доступ к экземплярам MySQL-MGR](../how_to/50-access)

## Процедура

### ClusterIP

<Tabs>
  <Tab label="CLI">
    1. Получите имя службы: На основе имени экземпляра соответствующими именами служб являются `${name}-read-write` и `${name}-read-only`.
    2. Подключитесь с помощью клиента MySQL. Например, для доступа к службе чтения/записи:

    ```bash
    mysql -h${instance_name}-read-write.${namespace} -P3306 -u${username} -p${password}
    ```

    3. Просмотрите роли участников:

    ```bash
    select * from performance_schema.replication_group_members;
    ```
  </Tab>

  <Tab label="Web Console">
    1. Перейдите в **Управление доступом** на странице деталей экземпляра.
    2. Получите метод доступа:

    - Внутренний доступ к кластеру: внутренний роутинг для чтения/записи или только для чтения; форматы: `${instance name}-read-write` и `${instance name}-read-only`.

    3. Получите учетные данные для доступа.
    4. Подключитесь с помощью инструмента клиента `mysql` извне кластера или через терминал. Например, для доступа к службе чтения/записи:

    ```bash
    mysql -h${instance_name}-read-write.${namespace} -P3306 -u${username} -p${password}
    ```

    5. Просмотрите роли участников:

    ```bash
    select * from performance_schema.replication_group_members;
    ```
  </Tab>
</Tabs>

### NodePort

<Tabs>
  <Tab label="CLI">
    ::: tip Подтвердите развернутый режим доступа
    Убедитесь, что поле настроено как **NodePort**.

    ```bash
    kubectl -n ${namespace} get mysql ${name} -o jsonpath='{.spec.mgr.router.svcRW.type}'
    ```

    :::

    1. Получите порт доступа NodePort:

    ```bash
    kubectl get svc -n ${namespace} ${name}-read-write -o jsonpath='{.spec.ports[0].nodePort}'
    ```

    2. Подключитесь с помощью клиента MySQL:

    ```bash
    mysql -h${node_ip} -P${port} -u${username} -p${password}
    ```

    3. Просмотрите роли участников:

    ```bash
    select * from performance_schema.replication_group_members;
    ```
  </Tab>

  <Tab label="Web Console">
    ::: tip Подтвердите развернутый режим доступа
    Перейдите в **Управление доступом** на странице деталей экземпляра и проверьте наличие **Внешний доступ - через NodePort**.
    :::

    1. Перейдите в **Управление доступом** на странице деталей экземпляра.
    2. Выберите метод доступа:

    - Внешний доступ - через NodePort: адрес подключения Router для чтения/записи или только для чтения.

    3. Получите учетные данные для доступа.
    4. Подключитесь с помощью внешнего инструмента клиента MySQL или терминала:

    ```bash
    mysql -h${node_ip} -P${port} -u${username} -p${password}
    ```

    5. Просмотрите роли участников:

    ```bash
    select * from performance_schema.replication_group_members;
    ```
  </Tab>
</Tabs>
